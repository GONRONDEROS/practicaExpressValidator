<!DOCTYPE html>
<html>
  <head>
    <title>Formularios</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
  </head>
  <body>
    <h1> <%= title %> </h1>
    <% if (!locals.errors ){ %>
        <p>Welcome to <%= title %> </p>
    <% } else { %>
      <p><%= mensajeDeError %> %>
    <% } %>    
        
    <form action="/register" method="post" enctype="multipart/form-data">
      <div>
        <label for="name">Nombre:</label>
        <input 
          value= "<%= locals.oldData ? oldData.name : null %>"
          type="text" 
          name="name" 
          id="name" 
          class="form control is-valid">
        <% if (locals.errors && errors.name) { %>
          <div class="text-danger">
            <%= errors.name.msg  %> 
          </div>
        <% } %>
      </div>
      <div>
        <label for="surname">Apellido:</label>
        <input 
          value= "<%= locals.oldData ? oldData.surname : null %>"
          type="text" 
          name="surname" 
          id="surname"
          class="form control is-valid">
        <% if (locals.errors && errors.surname) { %>
          <div class="text-danger">
            <%= errors.surname.msg  %> 
          </div>
        <% } %>
      </div>
      <div>
        <label for="email">Correo electrónico:</label>
        <input 
          value= "<%= locals.oldData ? oldData.email : null %>"
          type="email" 
          name="email" 
          id="email"
          class="form control is-valid">
        <% if (locals.errors && errors.email) { %>
          <div class="text-danger">
            <%= errors.email.msg  %> 
          </div>
        <% } %>
      </div>
      <div>
        <label for="password">Contraseña:</label>
        <input 
          type="password"  
          name="password" 
          id="password"
          class="form control is-valid">
        <% if (locals.errors && errors.password) { %>
          <div class="text-danger">
            <%= errors.password.msg  %> 
          </div>
        <% } %>
      </div>
      <div>
        <label >Pais de Nacimiento:</label>
          <select name="country">
           <option value="">Elegi un pais</option>
            <% 
            let countries= ["Argentina", "Comlombia", "Ecuador", "Brazil", "Mexico", "Venezuela", "Peru", "Chile", "Uruguay"];
            %>
            <% for (const oneCountry of countries) { %>
              <option 
                value="<%= oneCountry %>"
                <%= locals.oldData && (oneCountry === oldData.country) ? "selected" : null %>
              > <%= oneCountry %> </option>
            <% } %>
          </select>
          <% if (locals.errors && errors.country) { %>
            <div class="text-danger">
              <%= errors.country.msg  %> 
            </div>
            <% } %>
      </div>
      <div>
        <label >Imagen de Perfil:</label>
        <input 
          type="file" 
          name="avatar">
          <% if (locals.errors && errors.avatar) { %>
            <div class="text-danger">
              <%= errors.avatar.msg  %> 
            </div>
          <% } %>
      </div>
      <button type="submit">Registrarse</button>
      </form>

  </body>
</html>
